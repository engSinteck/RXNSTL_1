<!DOCTYPE html>
<html lang="en">
<head>
<title>STL RX Strider</title>
<link rel="shortcut icon" href="STM32H7xx_files/favicon.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body onload="getRF()"> 
    <div id="header">
          <h1>RF Settings</h1>
    </div>
       <div id="img">
        <img src="STM32H7xx_files/logo.jpg" alt="" align="right" width=210 height=38>
    </div>
    
    <div id="nav">        
      <ul>
        <li><a class="group">Login: <span id="Login">user</span> <span id="lock2"></span></a></li>
		<li><a id="home" href="index.html">Dashboard</a></li>
		
        <li><a class="group">SETUP</a></li>        
        <li><a id="confaudio" href="audio.html">Audio</a></li>
		<li><a id="confrf" href="rf.html">RF</a></li>
        <li><a id="conftime" href="time.html">Time</a></li>
        <li><a id="confrds" href="rds.html">RDS</a></li>
        <li><a id="conffreq" href="freq.html">Frequency</a></li>
        <li><a id="confadvset" href="advset.html">Advanced Setups</a></li>
        <li><a id="confnetwork" href="network.html">Connectivity Options</a></li>
        <li><a id="confpass" href="password.html">Password</a></li>
        <li><a id="profile" href="profile.html">Station Profile</a></li>
        <li><a class="group">TOOLS</a></li>
        <li><a id="confhold" href="confighold.html">Config Hold/Factory Settings</a></li>
		<li><a id="MP3" href="mp3.html">MP3</a></li>
        <li><a id="FAIL" href="Fail.html">Fail List</a></li>
      </ul>                
    </div>

    <div id="section">		
        <fieldset>
        <div>
            <h4><label>BAND:<br></label></h4>
            <input type="radio" id="BAND1"
            name="band" value="off">
            <label for="BAND1">Narrow</label>

            <input type="radio" id="BAND2"
            name="band" value="on">
            <label for="BAND2">Wide</label>
		</div>
		<br>
		<h4><label>Attenuation:&nbsp&nbsp&nbsp<input type="number" id="atn" name="atn" step="0.25" min="0.0" max="31.75" value="0.0"</input>
		<h1></h1>
		<br><br>
		<button type="button" class="myButton" onclick="sendRF()">Submit</button>
		</fieldset>
		<br>
		<h5 hidden>Value: <span id="tst1">0</span></h5>
		<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
		<br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
	<script>
		function sendRF() {
		    var bwvar = "0";
			
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					document.getElementById("RFState").innerHTML =
					this.responseText;
				}
			};
            // Band IF
            if(document.getElementById("BAND1").checked) {
				bwvar = "0";
            }
            else if(document.getElementById("BAND2").checked) {
				bwvar = "1";
            }
			//
			var atten = document.getElementById("atn").value;
				
            var resp1 = "setRF=";
            var resp = resp1.concat("", "BW:", bwvar, ";ATTN:", atten, ";FIM");
			//alert(resp)
			if (confirm("Confirm !")) {
				xhttp.open("GET", resp, true);
				xhttp.send();
			}
			else {
                  
			}
		}
		
		function getRF() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // BAND IF
                        if( this.responseText.substring(this.responseText.indexOf("BW:")+3,this.responseText.indexOf("ATN:")-1) == '0' ) {
                            document.getElementById("BAND1").checked = true;
                            document.getElementById("BAND2").checked = false;
                        }
                        else {
                            document.getElementById("BAND1").checked = false;
                            document.getElementById("BAND2").checked = true;
                        }
						//
						document.getElementById("tst1").innerHTML = this.responseText.substring(this.responseText.indexOf("ATN:")+4,this.responseText.indexOf("FIM")-1);
						atn.value = document.getElementById("tst1").innerHTML;
                    }
                };
                xhttp.open("GET", "readRF", true);
                xhttp.send();
        }
			
		function getLogin() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("Login").innerHTML = this.responseText.substring(this.responseText.indexOf("User:")+5,this.responseText.indexOf("Config:")-1);
                document.getElementById("lock").innerHTML = this.responseText.substring(this.responseText.indexOf("Config:")+7,this.responseText.indexOf("FIM:")-1);
                if(document.getElementById("lock").innerHTML == '0') {
                    document.getElementById("teste1").className = "fa fa-unlock";
                    document.getElementById("lock2").className = "fa fa-unlock";
                    document.getElementById("lock2").style = "font-size:24px";
                }
                else {
                    document.getElementById("teste1").className = "fa fa-lock";
                    document.getElementById("lock2").className = "fa fa-lock";
                    document.getElementById("lock2").style = "font-size:24px";
                }
            }
        };
            xhttp.open("GET", "readLogin", true);
            xhttp.send();
        }
	</script>
	
    <div id="footer">
      <h5>Sinteck Next 2025 (&copy;) - <a href="http://www.sinteck.com.br" style="color:#FFFFFF;">www.sinteck.com.br</a><br></h5>
    </div>
</body>
</html>
