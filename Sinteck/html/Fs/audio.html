<!DOCTYPE html>
<html lang="en">
<head>
<title>STL RX Strider</title>
<link rel="shortcut icon" href="STM32H7xx_files/favicon.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body onload="getDataAudio()"> 
    <div id="header">
          <h1>Audio</h1>
    </div>
    
    <div id="img">
        <img src="STM32H7xx_files/logo.jpg" alt="" align="right" width=210 height=38>
    </div>
    
    <div id="nav">        
      <ul>
        <li><a class="group">Login: <span id="Login">user</span> <span id="lock2"></span></a></li>
		<li><a id="home" href="index.html">Dashboard</a></li>
		
        <li><a class="group">SETUP</a></li>        
        <li><a id="confaudio" href="audio.html">Audio</a></li>
        <li><a id="conftime" href="time.html">Time</a></li>
        <li><a id="confrds" href="rds.html">RDS</a></li>
        <li><a id="conffreq" href="freq.html">Frequency</a></li>
        <li><a id="confadvset" href="advset.html">Advanced Setups</a></li>
        <li><a id="confnetwork" href="network.html">Connectivity Options</a></li>
        <li><a id="confpass" href="password.html">Password</a></li>
        <li><a id="profile" href="profile.html">Station Profile</a></li>
        <li><a class="group">TOOLS</a></li>
        <li><a id="confhold" href="confighold.html">Config Hold/Factory Settings</a></li>
        <li><a id="FAIL" href="Fail.html">Fail List</a></li>
      </ul>                
    </div>

    <div id="sectionaudio">
        <fieldset>
        <div>
            <label><h4>SOURCE:<br></label></h4>
            <input type="radio" id="MPX1"
            name="source" value="mpx1">
            <label for="MPX1">MPX 1</label>

            <input type="radio" id="MPX2"
            name="source" value="mpx2">
            <label for="MPX2">MPX 2</label>

            <input type="radio" id="MPX3"
            name="source" value="mpx3">
            <label for="MPX3">MPX 3</label>
        </div>
        
        <div>
            <br><h4><label>AUDIO MODE:<br></label></h4>
            <input type="radio" id="MODE1"
            name="mode" value="mono">
            <label for="MODE1">Mono</label>

            <input type="radio" id="MODE2"
            name="mode" value="stereo">
            <label for="MODE2">Stereo</label>
		</div>
        
        <div>
            <br><h4><label>PRE-EMPHASIS:<br></label></h4>
            <input type="radio" id="EMPHASE1"
            name="emphase" value="50us">
            <label for="EMPHASE1">50uS</label>

            <input type="radio" id="EMPHASE2"
            name="emphase" value="75us">
            <label for="EMPHASE2">75uS</label>
		</div>
        
        <div>
            <br><h4><label>PROCESSOR:<br></label></h4>
            <input type="radio" id="PROCESSOR1"
            name="processor" value="on">
            <label for="PROCESSOR1">OFF</label>

            <input type="radio" id="PROCESSOR2"
            name="processor" value="off">
            <label for="PROCESSOR2">ON</label>
		</div>
        
        <div>
            <br><h4><label>TOSLINK:<br></label></h4>
            <input type="radio" id="TOSLINK1"
            name="toslink" value="on">
            <label for="TOSLINK1">OFF</label>

            <input type="radio" id="TOSLINK2"
            name="toslink" value="off">
            <label for="TOSLINK2">ON</label>
		</div>
        <div>
            <br><h4><label>AES192:<br></label></h4>
            <input type="radio" id="AES1921"
            name="aes192" value="on">
            <label for="AES1921">OFF</label>

            <input type="radio" id="AES1922"
            name="aes192" value="off">
            <label for="AES1922">ON</label>
		</div>
		<div>
            <br><h4><label>IMPEDANCE:<br></label></h4>
            <input type="radio" id="IMPEDANCE1"
            name="impedance" value="on">
            <label for="IMPEDANCE1">OFF</label>

            <input type="radio" id="IMPEDANCE2"
            name="impedance" value="off">
            <label for="IMPEDANCE2">ON</label>
		</div>
		
        </fieldset>
        <h3></h3>
        <button type="button" class="myButton" onclick="sendData()">Submit</button>
        <h3></h3>
        <p style="background-color:LightGray;"></p>
        <h3>Level Adjust: </h3>
        <h4><label>MPX 1:&nbsp&nbsp&nbsp<input type="number" id="volmpx1" name="volmpx1" min="0" max="60"</input>
		<label>&nbsp&nbsp&nbsp MPX 2:&nbsp&nbsp<input type="number" id="volmpx2" name="volmpx2" min="0" max="60"</input></h4>
        <h4><label>MPX 3:&nbsp&nbsp&nbsp<input type="number" id="volmpx3" name="volmpx3" min="0" max="60"</input>
		<label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp SCA:&nbsp <input type="number" id="volsca" name="volsca" min="0" max="60"</input></h4>
        <h4><label>LEFT:&nbsp&nbsp&nbsp&nbsp <input type="number" id="volleft" name="volleft" min="0" max="60"</input>
		<label>&nbsp&nbsp&nbsp RIGHT:&nbsp <input type="number" id="volright" name="volright" min="0" max="60"</input></h4>
		<h3></h3>
        <button type="button" class="myButton" onclick="sendDataVol()">Submit</button>
        <h3></h3>
        <p style="background-color:LightGray;"></p>
        <h3>MPX Alarm: </h3>
        <h4><label>Level ON:&nbsp&nbsp <input type="number" id="mpx_value" name="mpx_value" min="0" max="48"</input>
        <label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp Timer ON:&nbsp&nbsp&nbsp <input type="number" id="mpx_timer" name="mpx_timer" min="1" max="60"</input><label> min.</label></h4>
        <h4><label>Level OFF:&nbsp <input type="number" id="mpx_value_off" name="mpx_value_off" min="0" max="48"</input>
        <label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp Timer OFF:&nbsp <input type="number" id="mpx_timer_off" name="mpx_timer_off" min="1" max="60"</input><label> min.</label></h4>
        <h3></h3>
        <button type="button" class="myButton" onclick="sendAlarmMPX()">Submit</button>
        <h5 hidden>VOLMPX1: <span id="tst1">0</span></h5>
        <h5 hidden>VOLMPX2: <span id="tst2">0</span></h5>
		<h5 hidden>VOLMPX3: <span id="tst3">0</span></h5>
		<h5 hidden>VOLSCA : <span id="tst4">0</span></h5>
		<h5 hidden>VOLLEFT: <span id="tst5">0</span></h5>
		<h5 hidden>VOLRIGHT:<span id="tst6">0</span></h5>
        <h5 hidden>MPX VAlue: <span id="tst7">0</span></h5>
        <h5 hidden>MPX Timer: <span id="tst8">0</span></h5>
		<h5 hidden>MPX Value OFF: <span id="tst9">0</span></h5>
		<h5 hidden>MPX Timer OFF: <span id="tst10">0</span></h5>
        <h5 hidden>Teste1: <span id="teste1"></span></h5>
        <h5 hidden>Lock: <span id="lock">0</span></h5>
        <style>
            meter {
                width: 500px;
                height: 25px;
                border: 1px solid #ccc;
                border-radius: 3px;
            }
        </style>
        <script>
            function sendData() {
                var mpx = "1";
                var mode = "0";
                var enfase = "0";
                var processador = "0";
                var toslink = "0";
				var aes192 = "0";
				var impedance = "0";
                
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("RFState").innerHTML =
                        this.responseText;
                        }
                };
                // Source Audio    
                if(document.getElementById("MPX1").checked) { 
                    mpx = "1"; 
                }
                else if(document.getElementById("MPX2").checked) { 
                    mpx = "2";
                }
                else if(document.getElementById("MPX3").checked) { 
                    mpx = "3";
                }
                else {
                    mpx = "1";
                }
                // Mono-Stereo
                if(document.getElementById("MODE1").checked) {
                    stereo = "0";
                }
                else if(document.getElementById("MODE2").checked) {
                    stereo = "1";
                }
                // EMPHASE
                if(document.getElementById("EMPHASE1").checked) {
                    enfase = "1";
                }
                else if(document.getElementById("EMPHASE2").checked) {
                    enfase = "0";
                }
                // PROCESSOR
                if(document.getElementById("PROCESSOR1").checked) {
                    processador = "0";
                }
                else if(document.getElementById("PROCESSOR2").checked) {
                    processador = "1";
                }
                // TOSLINK
                if(document.getElementById("TOSLINK1").checked) {
                    toslink = "0";
                }
                else if(document.getElementById("TOSLINK2").checked) {
                    toslink = "1";
                }
				// AES192
                if(document.getElementById("AES1921").checked) {
                    aes192 = "0";
                }
                else if(document.getElementById("AES1922").checked) {
                    aes192 = "1";
                }
				// IMPEDANCE
                if(document.getElementById("IMPEDANCE1").checked) {
                    impedance = "0";
                }
                else if(document.getElementById("IMPEDANCE2").checked) {
                    impedance = "1";
                }
                
                var resp1 = "setAUDIO=";
                var resp = resp1.concat("", mpx, stereo, enfase, processador, toslink, aes192, impedance);
                //alert(resp)
                  if (confirm("Confirm !")) {
                    xhttp.open("GET", resp, true);
                    xhttp.send();
                  }
                  else {
                  
                  }
            }
            
            function sendDataVol() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("RFState").innerHTML =
                        this.responseText;
                        }
                };
                // Source Audio    
                var mpxvol1 = document.getElementById("volmpx1").value;
                var mpxvol2 = document.getElementById("volmpx2").value;
				var mpxvol3 = document.getElementById("volmpx3").value;
				var scavol  = document.getElementById("volsca").value;
				var leftvol  = document.getElementById("volleft").value;
				var rightvol  = document.getElementById("volright").value;
				
                var resp1 = "setAUDIOVOL=";
                var resp = resp1.concat("", "MPX1:", mpxvol1, ";MPX2:", mpxvol2, ";MPX3:", mpxvol3, ";SCA:", scavol, ";LEFT:", leftvol, ";RIGHT:", rightvol, ";FIM");
                //alert(resp)
                if (confirm("Confirm !")) {
                    xhttp.open("GET", resp, true);
                    xhttp.send();
                }
                else {
                  
                }
            }
            
            function sendAlarmMPX() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("RFState").innerHTML =
                        this.responseText;
                        }
                };
                // Source Audio    
                var mpx_var1 = document.getElementById("mpx_value").value;
                var mpx_var2 = document.getElementById("mpx_timer").value;
				var mpx_var3 = document.getElementById("mpx_value_off").value;
				var mpx_var4 = document.getElementById("mpx_timer_off").value;
                var resp1 = "setALARMMPX=";
                var resp = resp1.concat("", "MPXVALUE:", mpx_var1, ";MPXTIMER:", mpx_var2, ";MPXVALUEOFF:", mpx_var3, ";MPXTIMEROFF:", mpx_var4, ";FIM:");
                //alert(resp)
                if (confirm("Confirm !")) {
                    xhttp.open("GET", resp, true);
                    xhttp.send();
                }
                else {
                  
                }
            }
            
            function getAUDIO() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // MPX SOURCE
                        if( this.responseText.substring(this.responseText.indexOf("MPX:")+4,this.responseText.indexOf("STEREO:")-1) == '1' ) {
                            document.getElementById("MPX1").checked = true;
                            document.getElementById("MPX2").checked = false;
                            document.getElementById("MPX3").checked = false;
                        }
                        else if( this.responseText.substring(this.responseText.indexOf("MPX:")+4,this.responseText.indexOf("STEREO:")-1) == '2' ) {
                            document.getElementById("MPX1").checked = false;
                            document.getElementById("MPX2").checked = true;
                            document.getElementById("MPX3").checked = false;
                        }
                        else if( this.responseText.substring(this.responseText.indexOf("MPX:")+4,this.responseText.indexOf("STEREO:")-1) == '3' ) {
                            document.getElementById("MPX1").checked = false;
                            document.getElementById("MPX2").checked = false;
                            document.getElementById("MPX3").checked = true;
                        }
                        // Mono-Stereo
                        if( this.responseText.substring(this.responseText.indexOf("STEREO:")+7,this.responseText.indexOf("EMP:")-1) == '0' ) {
                            document.getElementById("MODE1").checked = true;
                            document.getElementById("MODE2").checked = false;
                        }
                        else {
                            document.getElementById("MODE1").checked = false;
                            document.getElementById("MODE2").checked = true;
                        }
                        // Emphase 50-75
                        if( this.responseText.substring(this.responseText.indexOf("EMP:")+4,this.responseText.indexOf("PROC:")-1) == '0' ) {
                            document.getElementById("EMPHASE1").checked = false;
                            document.getElementById("EMPHASE2").checked = true;
                        }
                        else {
                            document.getElementById("EMPHASE1").checked = true;
                            document.getElementById("EMPHASE2").checked = false;
                        }
                        // Processor Yes/NO
                        if( this.responseText.substring(this.responseText.indexOf("PROC:")+5,this.responseText.indexOf("TOS:")-1) == '0' ) {
                            document.getElementById("PROCESSOR1").checked = true;
                            document.getElementById("PROCESSOR2").checked = false;
                        }
                        else {
                            document.getElementById("PROCESSOR1").checked = false;
                            document.getElementById("PROCESSOR2").checked = true;
                        }
                        // TOSLINK
                        if( this.responseText.substring(this.responseText.indexOf("TOS:")+4,this.responseText.indexOf("AES:")-1) == '0' ) {
                            document.getElementById("TOSLINK1").checked = true;
                            document.getElementById("TOSLINK2").checked = false;
                        }
                        else {
                            document.getElementById("TOSLINK1").checked = false;
                            document.getElementById("TOSLINK2").checked = true;
                        }
						// AES192
                        if( this.responseText.substring(this.responseText.indexOf("AES:")+4,this.responseText.indexOf("IMP:")-1) == '0' ) {
                            document.getElementById("AES1921").checked = true;
                            document.getElementById("AES1922").checked = false;
                        }
                        else {
                            document.getElementById("AES1921").checked = false;
                            document.getElementById("AES19222").checked = true;
                        }
						// IMPEDANCE
                        if( this.responseText.substring(this.responseText.indexOf("IMP:")+4,this.responseText.indexOf("FIM")-1) == '0' ) {
                            document.getElementById("IMPEDANCE1").checked = true;
                            document.getElementById("IMPEDANCE2").checked = false;
                        }
                        else {
                            document.getElementById("IMPEDANCE1").checked = false;
                            document.getElementById("IMPEDANCE2").checked = true;
                        }                        
                        
						getAudioVol();
                    }
                };
                xhttp.open("GET", "readAUDIO", true);
                xhttp.send();
            }
            
            function getAudioVol() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("tst1").innerHTML = this.responseText.substring(this.responseText.indexOf("MPX1:")+5,this.responseText.indexOf("MPX2:")-1);
                        document.getElementById("tst2").innerHTML = this.responseText.substring(this.responseText.indexOf("MPX2:")+5,this.responseText.indexOf("MPX3:")-1);
						document.getElementById("tst3").innerHTML = this.responseText.substring(this.responseText.indexOf("MPX3:")+5,this.responseText.indexOf("SCA:")-1);
						document.getElementById("tst4").innerHTML = this.responseText.substring(this.responseText.indexOf("SCA:")+4,this.responseText.indexOf("LEFT:")-1);
						document.getElementById("tst5").innerHTML = this.responseText.substring(this.responseText.indexOf("LEFT:")+5,this.responseText.indexOf("RIGHT:")-1);
						document.getElementById("tst6").innerHTML = this.responseText.substring(this.responseText.indexOf("RIGHT:")+6,this.responseText.indexOf("FIM")-1);
						//
                        volmpx1.value = document.getElementById("tst1").innerHTML;
						volmpx2.value = document.getElementById("tst2").innerHTML;
						volmpx3.value = document.getElementById("tst3").innerHTML;
					    volsca.value = document.getElementById("tst4").innerHTML;
						volleft.value = document.getElementById("tst5").innerHTML;
						volright.value = document.getElementById("tst6").innerHTML;
                        
                        getAlarmMPX();
                    }
                };
                xhttp.open("GET", "readAudioVol", true);
                xhttp.send();
            }
            
            function getAlarmMPX() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("tst7").innerHTML = this.responseText.substring(this.responseText.indexOf("MPXVALUE:")+9,this.responseText.indexOf("MPXTIMER:")-1);
                        document.getElementById("tst8").innerHTML = this.responseText.substring(this.responseText.indexOf("MPXTIMER:")+9,this.responseText.indexOf("MPXVALUEOFF:")-1);
                        document.getElementById("tst9").innerHTML = this.responseText.substring(this.responseText.indexOf("MPXVALUEOFF:")+12,this.responseText.indexOf("MPXTIMEROFF:")-1);
					    document.getElementById("tst10").innerHTML = this.responseText.substring(this.responseText.indexOf("MPXTIMEROFF:")+12,this.responseText.indexOf("FIM")-1);
 					    mpx_value.value = document.getElementById("tst7").innerHTML;
                        mpx_timer.value = document.getElementById("tst8").innerHTML;
						mpx_value_off.value = document.getElementById("tst9").innerHTML;
                        mpx_timer_off.value = document.getElementById("tst10").innerHTML;
                    }
                };
                xhttp.open("GET", "readAlarmMPX", true);
                xhttp.send();
            }
            
        function getLogin() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("Login").innerHTML = this.responseText.substring(this.responseText.indexOf("User:")+5,this.responseText.indexOf("Config:")-1);
                document.getElementById("lock").innerHTML = this.responseText.substring(this.responseText.indexOf("Config:")+7,this.responseText.indexOf("FIM:")-1);
                if(document.getElementById("lock").innerHTML == '0') {
                    document.getElementById("teste1").className = "fa fa-unlock";
                    document.getElementById("lock2").className = "fa fa-unlock";
                    document.getElementById("lock2").style = "font-size:24px";
                }
                else {
                    document.getElementById("teste1").className = "fa fa-lock";
                    document.getElementById("lock2").className = "fa fa-lock";
                    document.getElementById("lock2").style = "font-size:24px";
                }
                
                getAUDIO();
            }
        };
            xhttp.open("GET", "readLogin", true);
            xhttp.send();
        }
            
        function getDataAudio() {
            getLogin();
        }
        </script>
        <br><br>
    </div>

    <div id="footer">
      <h5>Sinteck Next 2025 (&copy;) - <a href="http://www.sinteck.com.br" style="color:#FFFFFF;">www.sinteck.com.br</a><br></h5>
    </div>
		
</body>
</html>
